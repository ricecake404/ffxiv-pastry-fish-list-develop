(this["webpackJsonp"]=this["webpackJsonp"]||[]).push([["oceanFishing"],{"0eaa":function(e,t,n){"use strict";n("d285")},2909:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var a=n("6b75");function i(e){if(Array.isArray(e))return Object(a["a"])(e)}n("a4d3"),n("e01a"),n("d28b"),n("a630"),n("d3b7"),n("3ca3"),n("ddb0");function o(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}var r=n("06c5");function s(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function c(e){return i(e)||o(e)||Object(r["a"])(e)||s()}},"5db7":function(e,t,n){"use strict";var a=n("23e7"),i=n("a2bf"),o=n("7b0b"),r=n("50c4"),s=n("1c0b"),c=n("65f0");a({target:"Array",proto:!0},{flatMap:function(e){var t,n=o(this),a=r(n.length);return s(e),t=c(n,0),t.length=i(t,n,n,a,0,1,e,arguments.length>1?arguments[1]:void 0),t}})},"73d9":function(e,t,n){var a=n("44d2");a("flatMap")},a2bf:function(e,t,n){"use strict";var a=n("e8b5"),i=n("50c4"),o=n("0366"),r=function(e,t,n,s,c,l,u,m){var f,v=c,h=0,p=!!u&&o(u,m,3);while(h<s){if(h in n){if(f=p?p(n[h],h,t):n[h],l>0&&a(f))v=r(e,t,f,i(f.length),v,l-1)-1;else{if(v>=9007199254740991)throw TypeError("Exceed the acceptable array length");e[v]=f}v++}h++}return v};e.exports=r},c944:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-container",{class:"detail-wrapper "+(e.isMobile?"detail-wrapper-mobile":"detail-wrapper-pc")},[n("v-card",[n("v-card-title",[e._v("海钓航班时间表")]),n("div",[n("ocean-fishing-time-table",{attrs:{voyages:e.voyages,targetOptions:e.targetOptions},on:{filterChanged:e.filterChanged}})],1)],1)],1)},i=[],o=(n("99af"),n("4de4"),n("5db7"),n("d81d"),n("73d9"),n("b0c0"),n("5530")),r=(n("a630"),n("d3b7"),n("6062"),n("3ca3"),n("ddb0"),n("2909")),s=n("60bb"),c=n.n(s),l=(n("caad"),n("a15b"),n("2532"),6e4),u=60*l,m=[0,1,2,3,4,5],f=[0,1,2,3,4,5,0,1,2,3,4,5,1,0,3,2,5,4,1,0,3,2,5,4,2,3,4,5,0,1,2,3,4,5,0,1,3,2,5,4,1,0,3,2,5,4,1,0,4,5,0,1,2,3,4,5,0,1,2,3,5,4,1,0,3,2,5,4,1,0,3,2];function v(e){var t=e-e%(2*u);return e%(2*u)<15*l?t:t+2*u}function h(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:m;null!=n&&0!==n.length||(n=m);for(var a=64,i=Math.floor(Math.floor(e/u)/2),o=e-e%(2*u),r=[],s=0;r.length<t;s++){var c=f[(i+a+s)%f.length];n.includes(c)&&r.push({time:o+2*s*u,voyageType:c})}return r}var p=["梅尔托尔海峡北","罗塔诺海海面","加拉迪翁湾外海","梅尔托尔海峡南"],d=["早","午","晚"],g=[[3,2,0],[2,3,1]],y={4:{voyageSimpleName:"梅晚",target:"海龙成就 + ※珊瑚蝠鲼",comment:"蝠鲼可以1区跳跳乐",voyageDetail:"梅尔托尔海峡南(夜) - 加拉迪翁湾外海(日) - 梅尔托尔海峡北(夕)"},5:{voyageSimpleName:"罗晚",target:"※索蒂斯 + ※石骨鱼",comment:"索蒂斯可以1区跳跳乐，2区可以冲海龙成就",voyageDetail:"加拉迪翁湾外海(夜) - 梅尔托尔海峡南(日) - 罗塔诺海海面(夕)"},0:{voyageSimpleName:"梅早",target:"章鱼成就",comment:"也比较适合冲分",voyageDetail:"梅尔托尔海峡南(日) - 加拉迪翁湾外海(夕) - 梅尔托尔海峡北(夜)"},1:{voyageSimpleName:"罗早",target:"水母成就 + 冲分推荐",comment:"由于水母成就相对简单，更建议梅午1区跳跳乐",voyageDetail:"加拉迪翁湾外海(日) - 梅尔托尔海峡南(夕) - 罗塔诺海海面(夜)"},2:{voyageSimpleName:"梅午",target:"※索蒂斯 + ※依拉丝莫龙",comment:"1区可以水母成就跳跳乐",voyageDetail:"梅尔托尔海峡南(夕) - 加拉迪翁湾外海(夜) - 梅尔托尔海峡北(日)"},3:{voyageSimpleName:"罗午",target:"鲨鱼成就 + ※珊瑚蝠鲼",comment:"可以和鲨鱼队一起冲分",voyageDetail:"加拉迪翁湾外海(夕) - 梅尔托尔海峡南(夜) - 罗塔诺海海面(日)"}},b=[{achievements:[2562,2563],comment:"最佳冲分航线，同时适合钓章鱼成就"},{achievements:[2562,2565],comment:"次佳冲分路线，同时适合钓水母成就"},{achievements:[],comment:"航线上有两条蓝鱼，没起蓝鱼的话冲分有些困难"},{achievements:[2562,2564],comment:"还不错的冲分航线，同时适合钓鲨鱼成就"},{achievements:[2566],comment:"比较一般的航线，同时适合钓海马成就"},{achievements:[],comment:"航线上有两条蓝鱼，除非欧皇小队起3条蓝鱼否则冲分会很困难"}],T={29791:{_id:29791,name_chs:"依拉丝莫龙",icon:28012},29790:{_id:29790,name_chs:"石骨鱼",icon:28011},29788:{_id:29788,name_chs:"索蒂斯",icon:28009},29789:{_id:29789,name_chs:"珊瑚蝠鲼",icon:28010}},_=[{blueFish:29791},{blueFish:null},{blueFish:null},{blueFish:null},{blueFish:null},{blueFish:29790},{blueFish:null},{blueFish:null},{blueFish:null},{blueFish:null},{blueFish:29788},{blueFish:29789}];function O(e){return e>>>1}function S(e){return e%2}function C(e,t){return(t<<2)+e}function I(e){return e%4}function x(e){return e>>>2}function F(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Date.now(),t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:13,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:m;return h(e,t,n).map((function(e){var t=e.voyageType,n=g[S(t)],a=O(t),i=n.map((function(e,t){var n=(a+t)%3;return{locationName:p[e]+"("+d[n]+")",blueFish:_[C(e,n)].blueFish}}));return Object(o["a"])(Object(o["a"])(Object(o["a"])({},e),y[e.voyageType]),{},{voyageTip:b[t],locationTips:i,shift:{type:a,name:p[n[2]]}})}))}function N(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Date.now(),t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:13,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:m;return F(e,t,n).map((function(e){return{time:new Intl.DateTimeFormat("zh-Hans-CN",{formatMatcher:"basic",timeZone:"Asia/Shanghai",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",hour12:!1}).format(new Date(e.time)),name:e.voyageSimpleName,blueFish:e.locationTips.map((function(e){return T[e.blueFish]})).filter((function(e){return e})).map((function(e){return e.name_chs})).join("，"),achievements:e.voyageTip.comment}}))}var w={voyagesWithTipOf:F,simpleTipsOf:N,shiftTimeForCheckInLimit:v,voyageToShift:O,voyageToLocation:S,locationShiftIndexOf:C,locationShiftToLocation:I,locationShiftToShift:x,LOCATIONS:p,SHIFTS:d,LOCATION_SHIFT_TIPS:_,VOYAGE_TIPS:b,VOYAGE_TYPES:m,VOYAGE_LOCATIONS:g};function A(){return c.a.chain(w.VOYAGE_TYPES.flatMap((function(e){return w.VOYAGE_LOCATIONS[w.voyageToLocation(e)].map((function(t,n){return{voyage:e,locationShift:w.locationShiftIndexOf(t,(w.voyageToShift(e)+n)%3)}}))}))).uniq().groupBy("locationShift").mapValues((function(e){return e.map((function(e){return e.voyage}))})).value()}var j=A();function L(){var e=w.LOCATION_SHIFT_TIPS.map((function(e,t){return{locationShift:t,blueFish:e.blueFish}})).filter((function(e){return null!==e.blueFish})),t=c.a.chain(w.VOYAGE_TIPS.flatMap((function(e,t){return e.achievements.map((function(e){return{achievement:e,voyage:t}}))}))).groupBy("achievement").mapValues((function(e){return e.map((function(e){return e.voyage}))})).value(),n=new Set(w.VOYAGE_TIPS.flatMap((function(e){return e.achievements})));return[{type:"蓝鱼",options:e.map((function(e){return{type:"item",id:e.blueFish,voyageTypes:j[e.locationShift]}}))},{type:"成就",options:Array.from(n).map((function(e){return{type:"achievement",id:e,voyageTypes:t[e]}}))}].concat(Object(r["a"])(w.LOCATIONS.map((function(e,t){return{type:e,options:w.SHIFTS.map((function(n,a){var i=w.locationShiftIndexOf(t,a);return{type:"locationShift",id:w.locationShiftIndexOf(t,a),name:"".concat(e,"(").concat(n,")"),voyageTypes:j[i]}}))}}))))}console.log(j);var M=Object(o["a"])(Object(o["a"])({},w),{},{allTargets:L}),k=n("1aeb"),D=n("1315"),E=n("2f62"),P=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n(e.componentType,{tag:"component",attrs:{voyages:e.voyages,targetOptions:e.targetOptions,voyageN:e.voyageN,targets:e.targets},on:{filterChanged:e.filterChanged}})],1)},V=[],Y=(n("a9e3"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("v-form",[n("v-container",[n("v-row",[n("v-col",{staticClass:"d-flex",attrs:{cols:"12",md:"3"}},[n("v-subheader",[e._v("显示航班数")]),n("v-text-field",{attrs:{type:"number",solo:""},model:{value:e.voyageN,callback:function(t){e.voyageN=t},expression:"voyageN"}})],1),n("v-col",{staticClass:"d-flex",attrs:{cols:"12",md:"6"}},[n("v-subheader",[e._v("筛选条件")]),n("v-autocomplete",{staticClass:"targetSelector",attrs:{items:e.selectionOptions,color:"blue-grey lighten-2",placeholder:"选择或搜索筛选条件","item-text":"name","item-value":"id",multiple:"",clearable:"",chips:"","deletable-chips":"","return-object":"",solo:"",attach:".targetSelector"},on:{input:e.targetsChanged},scopedSlots:e._u([{key:"item",fn:function(t){return[t.item.header?[n("v-list-item-content",{domProps:{textContent:e._s(t.item.header)}})]:"locationShift"!==t.item.type?[n("v-list-item-content",[n("div",{staticClass:"d-flex align-center"},[n("item-icon",{attrs:{title:t.item.name,"icon-url":t.item.iconUrl,"icon-class":t.item.icon,type:t.item.type}}),n("div",[e._v(" "+e._s(t.item.name)+" ")])],1)])]:n("div",{staticClass:"d-flex align-center"},[n("v-icon",{attrs:{large:""}},[e._v(" mdi-map ")]),n("div",[e._v(" "+e._s(t.item.name)+" ")])],1)]}}]),model:{value:e.targets,callback:function(t){e.targets=t},expression:"targets"}})],1)],1)],1)],1),n("v-row",[n("v-col",{attrs:{cols:"12"}},[n("v-simple-table",{scopedSlots:e._u([{key:"default",fn:function(){return[n("colgroup",[n("col",{staticStyle:{width:"15%"},attrs:{span:"1"}}),n("col",{staticStyle:{width:"20%"},attrs:{span:"1"}}),n("col",{staticStyle:{width:"25%"},attrs:{span:"1"}}),n("col",{staticStyle:{width:"40%"},attrs:{span:"1"}})]),n("thead",[n("tr",[n("th",{staticClass:"text-right"},[e._v(" 登船登记时间（本地） ")]),n("th",{staticClass:"text-left pl-5"},[e._v(" 目标 ")]),n("th",{staticClass:"text-left"},[e._v(" 航线 ")]),n("th",{staticClass:"text-left"},[e._v(" 航线线路 ")])])]),n("tbody",e._l(e.voyages,(function(t,a){return n("tr",{key:a},[n("td",[n("div",{staticClass:"d-flex justify-end"},[n("div",{style:t.showDay?"":"visibility: hidden"},[e._v(" "+e._s(t.day)+" ")]),n("div",{staticClass:"ml-1"},[e._v(e._s(t.time))])])]),n("td",[n("div",{staticClass:"d-flex align-center"},e._l(t.targets,(function(e){return n("div",{key:e.id,style:"item"===e.type?"padding-top: 4px":""},[n("item-icon",{attrs:{title:e.name,"icon-url":e.iconUrl,"icon-class":e.icon,cover:e.cover,type:e.type}})],1)})),0)]),n("td",[n("div",{staticClass:"d-flex align-center"},[n("div",[e._v(e._s(t.name)+"航线")]),n("v-icon",[e._v(" "+e._s(t.shiftIcon)+" ")])],1)]),n("td",[n("div",{staticClass:"d-flex align-center"},e._l(t.voyageLocations,(function(t,a){return n("div",{key:a,staticClass:"mx-1"},[e._v(" "+e._s(t)+" ")])})),0)])])})),0)]},proxy:!0}])})],1)],1)],1)}),$=[],z=n("8b70"),G={name:"OceanFishingTimeTableLarge",components:{ItemIcon:z["a"]},props:{voyages:{type:Array,default:function(){return[]}},targetOptions:{type:Array,default:function(){return[]}}},data:function(){return{voyageNLazy:13,targets:[]}},computed:{selectionOptions:function(){return this.targetOptions.flatMap((function(e,t){return t?[{divider:!0},{header:e.type}].concat(Object(r["a"])(e.options)):[{header:e.type}].concat(Object(r["a"])(e.options))}))},voyageN:{get:function(){return this.voyageNLazy},set:function(e){var t=this;this.voyageNLazy=e,this.$nextTick((function(){var n=Math.floor(+e);n<1?n=1:n>100&&(n=100),t.voyageNLazy=n,t.filterChanged(n,t.targets)}))}}},methods:{targetsChanged:function(e){this.filterChanged(this.voyageN,e)},filterChanged:function(e,t){console.log(t),this.$emit("filterChanged",{voyageN:e,voyageTypes:c.a.uniq(t.flatMap((function(e){return e.voyageTypes})))})}}},H=G,U=n("2877"),Z=Object(U["a"])(H,Y,$,!1,null,"7374cb1b",null),q=Z.exports,B=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-simple-table",{scopedSlots:e._u([{key:"default",fn:function(){return[n("thead",[n("tr",[n("th",{staticClass:"text-left"},[e._v(" 登船登记时间（本地） ")]),n("th",{staticClass:"text-left"},[e._v(" 航线 ")]),n("th",{staticClass:"text-left"},[e._v(" 目标 ")])])]),n("tbody",e._l(e.voyages,(function(t,a){return n("tr",{key:a},[n("td",[n("div",{staticClass:"d-flex"},[n("div",{style:t.showDay?"":"visibility: hidden"},[e._v(" "+e._s(t.day)+" ")]),n("div",{staticClass:"ml-1"},[e._v(e._s(t.time))])])]),n("td",[n("div",{staticClass:"d-flex align-center"},[n("div",[e._v(" "+e._s(t.name)+" ")]),n("v-icon",[e._v(" "+e._s(t.shiftIcon)+" ")])],1)]),n("td",[n("div",{staticClass:"d-flex align-center"},e._l(t.targets,(function(e){return n("div",{key:e.id,staticClass:"mx-1"},[n("item-icon",{attrs:{title:e.name,"icon-class":e.icon}})],1)})),0)])])})),0)]},proxy:!0}])})},J=[],W={name:"OceanFishingTimeTableSmall",components:{ItemIcon:z["a"]},props:{voyages:{type:Array,default:function(){return[]}}}},K=W,Q=Object(U["a"])(K,B,J,!1,null,"5dbe02b0",null),R=Q.exports,X={name:"OceanFishingTimeTable",components:{OceanFishingTimeTableSmall:R,OceanFishingTimeTableLarge:q},props:{targets:{type:Array,default:void 0},voyageN:{type:Number},voyages:{type:Array,default:function(){return[]}},targetOptions:{type:Array,default:function(){return[]}}},data:function(){return{}},computed:{isMobile:function(){return this.$vuetify.breakpoint.mobile},componentType:function(){return this.isMobile?"OceanFishingTimeTableSmall":"OceanFishingTimeTableLarge"}},methods:{filterChanged:function(e){this.$emit("filterChanged",e)}}},ee=X,te=Object(U["a"])(ee,P,V,!1,null,"c6673034",null),ne=te.exports,ae=n("7a7d"),ie={name:"OceanFishingPage",components:{OceanFishingTimeTable:ne},props:["now"],data:function(){return{achievementScore40:ae["a"].getImgUrl("ocean-fishing-score-achievement-40x40.png"),filter:{voyageN:13},lazyNow:this.now}},computed:Object(o["a"])({isMobile:function(){return this.$vuetify.breakpoint.mobile},voyages:function(){var e=this;return M.voyagesWithTipOf(M.shiftTimeForCheckInLimit(this.lazyNow),this.filter.voyageN,this.filter.voyageTypes).map((function(t,n){var a=0===n||0===oe(t.time).hour,i=t.voyageTip.achievements.map((function(t){return e.assembleAchievement(t)})).concat(t.locationTips.map((function(t){return{blueFish:e.assembleItem(t.blueFish)}})).flatMap((function(e){return[e.blueFish]}))).filter((function(e){return e}));return{showDay:a,simpleName:t.voyageSimpleName,day:k["a"].formatDateTime(t.time,"MM-dd"),time:k["a"].formatDateTime(t.time,"HH:mm"),shiftIcon:re(t.shift.type),name:t.shift.name,targets:i,voyageLocations:t.locationTips.map((function(e){return e.locationName}))}}))},targetOptions:function(){var e=this;return M.allTargets().map((function(t){return{type:t.type,options:t.options.map((function(t){return"item"===t.type?Object(o["a"])(Object(o["a"])({},e.assembleItem(t.id)),{},{voyageTypes:t.voyageTypes}):"achievement"===t.type?Object(o["a"])(Object(o["a"])({},e.assembleAchievement(t.id)),{},{voyageTypes:t.voyageTypes}):t}))}}))}},Object(E["b"])(["getItemName","getItemIconClass","getAchievementName","getAchievementIconClass"])),watch:{now:function(e){e%9e5<2e3&&(this.lazyNow=e)}},methods:{assembleItem:function(e){return e&&{id:e,name:this.getItemName(e),icon:this.getItemIconClass(e),type:"item"}},assembleAchievement:function(e){return e&&{id:e,name:this.getAchievementName(e),icon:this.getAchievementIconClass(e),iconUrl:2562===e?this.achievementScore40:null,type:"achievement"}},filterChanged:function(e){this.filter=e}}};function oe(e){return D["DateTime"].fromMillis(e).setZone(D["FixedOffsetZone"].instance(480))}function re(e){var t=["mdi-weather-sunny","mdi-weather-sunset","mdi-weather-night"];return t[e]}var se=ie,ce=(n("0eaa"),Object(U["a"])(se,a,i,!1,null,"6868a59a",null));t["default"]=ce.exports},d285:function(e,t,n){}}]);